<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <title>Document</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>
    <input type="hidden" id="txt_barcode">
    <script>
    var codigoTimeout;
    var codigo = '';

    jQuery(document).ready(function($) {
        console.log('hola mundo');
        /* $('body').on("click mousedown mouseup focus blur keydown change mouseup click dblclick mousemove mouseover mouseout mousewheel keydown keyup keypress textInput touchstart touchmove touchend touchcancel resize scroll zoom focus blur select change submit reset",function(e){
            console.log(e);
        }); */

        $(window).on('propertychange change click keyup keydown input paste', function(e) {
            console.log('codigo', e.key);
            e.preventDefault();
            if (codigoTimeout) { clearTimeout(codigoTimeout); }

            if (e.which === 13) {
                console.log('enter', codigo);
                buscarCodigoProducto(codigo);
                return codigo = '';
            }

            codigo += e.key;

            codigoTimeout = setTimeout(function(){
                codigo = '';
            }, 100);
        });

        function buscarCodigoProducto(params) {
            console.log(params);
        }
    });
    </script>
</body>
</html>